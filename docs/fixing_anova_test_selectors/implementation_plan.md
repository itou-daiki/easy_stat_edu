# システム全体の検証と改善の実施計画

## ゴール
初学者が使いやすいようにトップページの説明を改善し、全ての分析ロジックの妥当性や数値計算を再検証する。また、複数従属変数を持つ一覧表のUIを洗練させ、結果表示の順序を一貫させる。ユーティリティ機能内に存在する重複を整理する。

## ユーザーレビューが必要な項目
- **[確認事項] 結果表示の順序と「統合表」の扱いについて**
  現在、T検定や分散分析などでは、平均やSDなどの「要約統計量」とt値・p値などの「本結果」が**1つのAPAスタイルの一括表（横長の表）に統合**されています。
  ご要望の「要約統計量」→「本結果」→「事後分析」という順序は、**これらを全く別の表として上下に分割する**という意図でしょうか？それとも、**現在のような（見やすい）統合表の構造を維持し、左から右への配置順や他の分析において同じUIを使用する**という意図でしょうか？

- **[確認事項] ユーティリティ機能の重複整理について**
  調査の結果、以下の重複機能が見つかりました：
  1. **データの結合**: 独立したカード「データ結合 (`data_merge.js`)」と、データ加工内のタブ「データの結合 (`data_processing.js`)」が重複しています。**「データ加工」内のタブを削除して整理**してよろしいでしょうか？（独立カードの方が高機能です）
  2. **合計・平均の算出**: 「因子得点算出 (`factor_score.js`)」は外部Scale情報を使い一括処理でき、「変数の計算 (`data_processing.js`)」は手動で足し算や平均・引き算等を作る機能です。目的が異なるためこれらは**共存**のままでよろしいでしょうか？

## 提案する変更内容

### 1. トップページと初学者向けUIの改善
- `index.html` に記載された各分析機能の「説明文」を、初学者向けに分かりやすく、専門用語を平易にした表現へ修正する。

### 2. 分析結果表示と表のUI統一（一覧性と順序）
- T検定、分散分析、ノンパラメトリック検定を中心に、出力テーブルを精査。
- 出力順序を、明確に「要約統計量 → 検定結果(本結果) → 効果量等 → 事後検定」となるように画面レイアウト（DOMの配置）を整理・統一。
- 複数選択ボックスのUIを、チェックボックス付きのもの（案A）に全て統一する（済）

### 3. 分析サポーター (Analysis Supporter) の妥当性向上・TDD改修
- 現在のサジェストロジックが一部の実務的な分析手法（クロス集計表、ウィルコクソンの符号付順位検定、マクネマー検定、フィッシャーの正確確率検定、ロジスティック回帰分析など）をカバーしきれていないため、実務的な推奨ルールへ刷新する。
- 数値・カテゴリ・テキスト変数の様々な組み合わせに対し、統計学的に妥当で抜け洩れのないサジェスト（モジュールの `data-requires` との整合性担保）を行うように変更する。
- 複合的な変数選択（例：テキスト変数と数値変数の両方を選択）の際も、排他的にならず利用可能な手法をすべて併記できるようにする。

### 4. ユーティリティ機能・デッドコードの整理
- `data_processing.js` 内の重複機能タブ（データの結合等）を削除し、専用の機能モジュールへ操作を誘導する。UIの複雑さを軽減。(完了)
- 現在は使用されていない `MultiSelect.js` 及び専用 CSS の削除。(完了)
- 残存していたテストスクリプトの一時ファイルやログ、不要なインポートや変数のコメントを削除し、プロジェクトをクリーンアップ。(完了)

### 5. ロジック・数値検証
- JSの機能全般（特に各種検定アルゴリズムの算出ロジック）について、p値・効果量等の計算に誤りがないかを広範にソースから追跡し、最適化・TDDアプローチでの修正を実施する。

## 検証プラン
### 自動テスト・手動検証
- 修正に伴い、TDD環境や手動によるテストデータを用いた分析結果の突合を実施。
- すべてのUI（表形式・順序）が期待どおりに揃っているか目視検証。
